import ReactEcharts from "echarts-for-react"
// import echarts from "echarts";

import {Component} from 'react'

export default class Pie extends Component {

  calculateMA(dayCount: number, data: string | any[]) {
    let result = [];
    for (let i = 0, len = data.length; i < len; i++) {
      if (i < dayCount) {
        result.push('-');
        continue;
      }
      let sum = 0;
      for (let j = 0; j < dayCount; j++) {
        sum += +data[i - j][1];
      }
      result.push((sum / dayCount).toFixed(2));
    }
    return result;
  }

  getOption = ()=>{

    let myData = [
      [1.011191373, 0.990526002, 0.956871146, 1.053751233],
      [1.084874429, 0.916378728, 0.871151565, 1.278272007],
      [1.132757862, 1.168091844, 0.746156662, 1.241967637],
      [1.026069293, 1.226555501, 1.01078979, 1.304157218],
      [1.067493471, 0.948025158, 0.937203443, 1.106992371],
      [1.039847795, 1.096591738, 1.023772117, 1.188981486],
      [1.192315435, 0.990812986, 0.931488744, 1.276717304],
      [0.959786467, 0.944759757, 0.847827083, 0.98352378],
      [1.07317271, 1.10193514, 0.95838256, 1.248447685],
      [1.047752383, 0.923121002, 0.727388907, 1.195743877],
      [0.999216608, 1.204907777, 0.957488596, 1.355509241],
      [1.038924902, 1.233701921, 0.891952569, 1.299804607],
      [0.870082948, 1.060126615, 0.80166154, 1.126403067],
      [0.91298828, 1.111094483, 0.896594497, 1.167097773],
      [1.161036562, 0.968241766, 0.928145482, 1.172080797],
      [1.112264817, 1.273254487, 0.868426914, 1.282552468],
      [0.976582221, 1.006229491, 0.76516399, 1.12758197],
      [1.037749302, 1.094705803, 1.005519531, 1.10258505],
      [1.089896225, 1.145167777, 0.755022884, 1.221863446],
      [0.970855769, 1.095790641, 0.933554387, 1.295371091],
      [1.014098179, 0.848052015, 0.840072663, 1.143440959],
      [0.905558259, 0.960365282, 0.75405415, 1.346683878],
      [1.195253347, 0.998053496, 0.937442151, 1.195634728],
      [1.314450228, 1.038599592, 1.036685839, 1.323770073],
      [1.148720316, 1.006164249, 0.996586198, 1.150817798],
      [1.009308681, 1.007127783, 0.891991586, 1.27233388],
      [0.819165502, 0.936976734, 0.807456758, 1.120443019],
      [1.115592356, 1.154630383, 0.921465467, 1.167177246],
      [1.020446206, 1.163806071, 0.842697052, 1.203754427],
      [1.005331591, 1.040922679, 0.854682234, 1.112524732],
      [0.903722685, 1.021950752, 0.856991524, 1.092525677],
      [0.834692593, 0.824131447, 0.595680006, 0.875956258],
      [0.83255694, 0.834617291, 0.76100102, 0.870532654],
      [0.772135003, 0.70629637, 0.703407377, 0.994026656],
      [0.670051516, 0.740415023, 0.650442182, 0.829726883],
      [0.699668808, 0.761633267, 0.625128275, 0.830863085],
      [0.712407177, 0.849408838, 0.680241446, 0.87663397],
      [0.698260179, 0.85582552, 0.622600881, 0.866507353],
      [0.979345654, 0.841497237, 0.792037938, 1.11874896],
      [0.908786928, 0.719683182, 0.613660353, 0.995137308],
      [0.686404174, 0.689228343, 0.686221784, 0.819258744],
      [0.678990095, 0.715086173, 0.653785341, 0.874180849],
      [0.836280762, 0.946444857, 0.673605018, 1.018736163],
      [0.856679093, 0.880936793, 0.750327941, 0.961142438],
      [0.784947892, 0.640941366, 0.579478006, 0.843140896],
      [0.812229322, 0.722650384, 0.684862356, 0.920532906],
      [0.72643707, 0.716519816, 0.661964199, 0.995896383],
      [0.795345545, 0.926278484, 0.719826023, 0.932150626],
      [0.698387066, 0.721553067, 0.644743182, 0.805536332],
      [0.76474796, 0.633899769, 0.623416588, 0.784906884],
      [0.686252871, 0.771051906, 0.658682202, 0.968749763],
      [0.737573566, 0.740595144, 0.657231371, 0.934986932],
      [0.930547844, 0.785513013, 0.557109667, 0.973309168],
      [0.750333624, 0.689965798, 0.653200257, 0.802824237],
      [0.841293594, 0.871516947, 0.738633048, 1.036152218],
      [0.798147644, 0.819913551, 0.77765979, 1.029245971],
      [0.871970102, 0.85840153, 0.597882042, 0.94351521],
      [0.795320436, 0.75064344, 0.712564435, 0.928847267],
      [0.739243653, 0.728185927, 0.66859447, 0.876484098],
      [0.747777826, 0.92585322, 0.726452109, 0.956371817],
      [1.242639043, 1.248968131, 1.134071114, 1.379481421],
      [1.215184486, 1.434574464, 1.210699065, 1.504203257],
      [1.19683936, 1.285234728, 1.006158363, 1.336547717],
      [1.168339017, 1.184756069, 1.016812573, 1.304311972],
      [1.481885668, 1.420718889, 1.348919446, 1.58911669],
      [1.126094883, 1.169527553, 1.055286116, 1.190786625],
      [1.225917145, 1.087078991, 1.074098032, 1.254543215],
      [1.273525071, 1.336007137, 1.17157077, 1.455142874],
      [1.221144618, 1.213576483, 1.074956436, 1.460296688],
      [1.254079143, 1.210850493, 1.143733948, 1.268231208],
      [1.402603877, 1.302006674, 1.115852086, 1.513780003],
      [1.182981944, 1.350399861, 1.069338726, 1.414695547],
      [1.217335199, 1.243317358, 1.146713218, 1.385565922],
      [1.364516737, 1.265599304, 1.035908422, 1.492231472],
      [1.203357049, 1.304033525, 1.169856434, 1.32383269],
      [1.109154303, 1.236023478, 0.964957233, 1.467865125],
      [1.392395026, 1.240626206, 1.052129962, 1.457949931],
      [1.273598674, 1.321660924, 1.044709161, 1.456083334],
      [1.32083078, 1.386552082, 1.172148322, 1.409564903],
      [1.406554426, 1.221764119, 1.21108188, 1.426558023],
      [1.400871048, 1.256340041, 1.141070868, 1.429709563],
      [1.042210316, 1.036500069, 0.93839166, 1.364740627],
      [1.261015821, 1.37144069, 1.128086253, 1.47011501],
      [1.261127414, 1.238183958, 1.19032191, 1.322519642],
      [1.172496768, 1.205273096, 1.137220745, 1.264775195],
      [1.307506939, 1.263286203, 1.232625832, 1.459887304],
      [1.217908005, 1.165562559, 1.12534195, 1.251289614],
      [1.323498153, 1.109157426, 0.924633441, 1.408141996],
      [1.190473515, 1.265063538, 1.037466142, 1.292726532],
      [1.181274597, 1.173921443, 1.056609937, 1.522127893],
      [1.424240349, 1.232167915, 1.111218218, 1.548253404],
      [1.302332686, 1.373126441, 1.300906616, 1.454769422],
      [1.377726725, 1.318321852, 1.147502908, 1.616439098],
      [1.324922774, 1.394014511, 1.286543547, 1.537079032],
      [1.174433335, 1.482305135, 1.131241075, 1.531822032],
      [1.420415918, 1.48082715, 1.35570872, 1.500669666],
      [1.124346365, 1.293614484, 1.101947468, 1.495160464],
      [1.371774644, 1.406584349, 1.196100256, 1.534697507],
      [1.543541189, 1.518742271, 1.182705162, 1.564738309],
      [1.294844216, 1.350286466, 1.078124834, 1.450623416],
      [1.345511484, 1.480309292, 1.320064203, 1.486533402],
      [1.341515128, 1.407775179, 1.208889881, 1.473037298],
      [1.356775546, 1.346495654, 1.312208225, 1.366990285],
      [1.389845279, 1.230645665, 1.04333744, 1.449978979],
      [1.428893292, 1.259117257, 1.182873673, 1.508840153],
      [1.490724425, 1.314742931, 1.259292271, 1.561318724],
      [1.371262068, 1.473436382, 1.322260916, 1.5882125],
      [1.362362356, 1.468678899, 1.134988379, 1.581831451],
      [1.304759806, 1.357478196, 1.249259637, 1.391186012],
      [1.394209793, 1.27491812, 1.144970624, 1.476930345],
      [1.36072251, 1.406889879, 1.21922857, 1.456670773],
      [1.495667206, 1.461785189, 1.33922637, 1.5777157],
      [1.382818805, 1.337266, 1.202475614, 1.404767697],
      [1.274877031, 1.289413968, 1.26280178, 1.335839851],
      [1.353044709, 1.314610154, 1.26768644, 1.411204375],
      [1.247026644, 1.484975124, 1.209864986, 1.49614148],
      [1.354482217, 1.489060791, 1.253071302, 1.690412275],
      [1.245403695, 1.344499628, 1.228955976, 1.440083894],
      [1.400533252, 1.508212172, 1.218558391, 1.555299739],
      [1.436575382, 1.342334532, 1.112839223, 1.511223038],
      [1.27223989, 1.536468591, 1.194780817, 1.553173274],
      [1.423552335, 1.428758657, 1.280516942, 1.623435258],
      [1.546388516, 1.614527265, 1.327435279, 1.679901216],
      [1.519942127, 1.352799386, 1.219966716, 1.542505382],
      [1.433218785, 1.337299535, 1.326725342, 1.493358319],
      [1.312763485, 1.446705211, 1.312382545, 1.545920472],
      [1.386346553, 1.576090458, 1.244946124, 1.615990055],
      [1.378099914, 1.402153925, 1.367474127, 1.554644658],
      [1.628681177, 1.571115546, 1.265013817, 1.669357408],
      [1.516192381, 1.453707254, 1.448465275, 1.573470448],
      [1.68354428, 1.523560315, 1.379753349, 1.701264775],
      [1.412117876, 1.35333564, 1.12922678, 1.451968511],
      [1.561786517, 1.490403538, 1.221276841, 1.584854207],
      [1.470921336, 1.441334406, 1.26333756, 1.475142358],
      [1.447957251, 1.48989951, 1.42030272, 1.576479283],
      [1.457185629, 1.459428509, 1.397469104, 1.521897311],
      [1.343815185, 1.372536848, 1.200789431, 1.481898346],
      [1.593055819, 1.570808899, 1.327794076, 1.749089226],
      [1.474590069, 1.565949651, 1.466510442, 1.730169524],
      [1.534961889, 1.398084655, 1.391835675, 1.614629653],
      [1.374692698, 1.437032383, 1.190291065, 1.499321044],
      [1.458920041, 1.303944089, 1.185249407, 1.772444073],
      [1.327198777, 1.205576666, 1.17735647, 1.442104461],
      [1.447599974, 1.492955375, 1.384796334, 1.536818993],
      [1.625223047, 1.403204084, 1.162888702, 1.697585811],
      [1.439353679, 1.285674963, 1.264140909, 1.528789744],
      [1.595634846, 1.450831063, 1.32726848, 1.649252783],
      [1.432085791, 1.414743366, 1.284706514, 1.532128798],
      [1.520804747, 1.584688023, 1.254920157, 1.679417407],
      [1.451523654, 1.605077221, 1.321624898, 1.63872775],
      [1.503792352, 1.483379017, 1.321718696, 1.590657636],
      [1.41077034, 1.58009992, 1.368674643, 1.595653689],
      [1.380585879, 1.462126036, 1.33435956, 1.631614015]
    ]
    let dataMA5 = this.calculateMA(5, myData);
    let dataMA10 = this.calculateMA(10, myData);
    let dataMA20 = this.calculateMA(20, myData);
    let option = {
      grid: {
        left: '9%',
        right: '10%',
        bottom: '17%',
        top: "15%"
      },
      xAxis: {
        data: ["2023/8/1", "2023/8/2", "2023/8/3", "2023/8/4", "2023/8/5", "2023/8/6", "2023/8/7", "2023/8/8", "2023/8/9", "2023/8/10", "2023/8/11", "2023/8/12", "2023/8/13", "2023/8/14", "2023/8/15", "2023/8/16", "2023/8/17", "2023/8/18", "2023/8/19", "2023/8/20", "2023/8/21", "2023/8/22", "2023/8/23", "2023/8/24", "2023/8/25", "2023/8/26", "2023/8/27", "2023/8/28", "2023/8/29", "2023/8/30", "2023/8/31", "2023/9/1", "2023/9/2", "2023/9/3", "2023/9/4", "2023/9/5", "2023/9/6", "2023/9/7", "2023/9/8", "2023/9/9", "2023/9/10", "2023/9/11", "2023/9/12", "2023/9/13", "2023/9/14", "2023/9/15", "2023/9/16", "2023/9/17", "2023/9/18", "2023/9/19", "2023/9/20", "2023/9/21", "2023/9/22", "2023/9/23", "2023/9/24", "2023/9/25", "2023/9/26", "2023/9/27", "2023/9/28", "2023/9/29", "2023/9/30", "2023/10/1", "2023/10/2", "2023/10/3", "2023/10/4", "2023/10/5", "2023/10/6", "2023/10/7", "2023/10/8", "2023/10/9", "2023/10/10", "2023/10/11", "2023/10/12", "2023/10/13", "2023/10/14", "2023/10/15", "2023/10/16", "2023/10/17", "2023/10/18", "2023/10/19", "2023/10/20", "2023/10/21", "2023/10/22", "2023/10/23", "2023/10/24", "2023/10/25", "2023/10/26", "2023/10/27", "2023/10/28", "2023/10/29", "2023/10/30", "2023/10/31", "2023/11/1", "2023/11/2", "2023/11/3", "2023/11/4", "2023/11/5", "2023/11/6", "2023/11/7", "2023/11/8", "2023/11/9", "2023/11/10", "2023/11/11", "2023/11/12", "2023/11/13", "2023/11/14", "2023/11/15", "2023/11/16", "2023/11/17", "2023/11/18", "2023/11/19", "2023/11/20", "2023/11/21", "2023/11/22", "2023/11/23", "2023/11/24", "2023/11/25", "2023/11/26", "2023/11/27", "2023/11/28", "2023/11/29", "2023/11/30", "2023/12/1", "2023/12/2", "2023/12/3", "2023/12/4", "2023/12/5", "2023/12/6", "2023/12/7", "2023/12/8", "2023/12/9", "2023/12/10", "2023/12/11", "2023/12/12", "2023/12/13", "2023/12/14", "2023/12/15", "2023/12/16", "2023/12/17", "2023/12/18", "2023/12/19", "2023/12/20", "2023/12/21", "2023/12/22", "2023/12/23", "2023/12/24", "2023/12/25", "2023/12/26", "2023/12/27", "2023/12/28", "2023/12/29", "2023/12/30", "2023/12/31"
        ],
        splitLine: {show: false},
        axisLine: {
          lineStyle: {
            type: 'solid',
            color: 'black', //white
            width: 1,
          }
        },
        name: '日期',
        scale: true,
        nameTextStyle: {
          padding: [30, 0, 0, -30],
        },
        axisLabel: {
          textStyle: {
            color: 'black', //white
          }
        },
      },
      yAxis: {
        min: 0.3,
        max: 1.8,
        splitLine: {show: false},
        axisLine: {
          lineStyle: {
            type: 'solid',
            color: 'black', //white
            width: 1,
          }
        },
        axisLabel: {
          textStyle: {
            color: 'black', //white
          }
        },
        scale: true,
        // interval : 4,
        boundaryGap: [0.2, 0.2],
        //单位
        name: '算力/元/小时',
        type: 'value',
      },
      series: [
        {
          type: 'candlestick',
          itemStyle: {
            color: "#3a73c0",
            color0: "#79daff",
            borderColor: "#3a73c0",
            borderColor0: "#79daff"
          },
          data: myData
        },
        {
          name: 'MA5',
          type: 'line',
          data: dataMA5,
          smooth: true,
          showSymbol: false,
          lineStyle: {
            width: 3
          }
        },
        {
          name: 'MA10',
          type: 'line',
          data: dataMA10,
          smooth: true,
          showSymbol: false,
          lineStyle: {
            width: 3
          }
        },
        {
          name: 'MA20',
          type: 'line',
          data: dataMA20,
          smooth: true,
          showSymbol: false,
          lineStyle: {
            width: 3
          }
        }
      ]
    };
    return option;
  };
  render() {
    return (
      <ReactEcharts option={this.getOption()}/>
    )
  }
}
